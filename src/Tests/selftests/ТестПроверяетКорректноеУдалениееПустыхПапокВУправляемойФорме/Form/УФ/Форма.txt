&НаКлиенте
Перем ЮТест;  // для тестирования

//{ основная процедура для юнит-тестирования 1CUnit
&НаКлиенте
Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	ЮТест = ЮнитТестирование;
	
	ВсеТесты = Новый Массив;

	ВсеТесты.Добавить("ТестДолжен_ПроверитьКорректноеУдалениеПустыхКаталоговИзДерева");
	
	Возврат ВсеТесты;
	
КонецФункции
//}

//{ блок юнит-тестов - сами тесты

&НаКлиенте
Процедура ТестДолжен_ПроверитьКорректноеУдалениеПустыхКаталоговИзДерева() Экспорт
	
	СтрокаДерева = ДеревоЗначенийНаФорме.ПолучитьЭлементы().Добавить();
	СтрокаДерева.ТипСтроки = ЮТест.ЗначенияТиповСтроки.КаталогТестов;
	
	СтрокаДерева = ДеревоЗначенийНаФорме.ПолучитьЭлементы().Добавить();
	СтрокаДерева.ТипСтроки = ЮТест.ЗначенияТиповСтроки.КаталогТестов;
	
	// Подстрок должно быть 3, чтобы одна из них не удалилась.
	Для Счетчик = 1 ПО 3 Цикл
		НоваяСтрока = СтрокаДерева.ПолучитьЭлементы().Добавить();
		НоваяСтрока.ТипСтроки = ЮТест.ЗначенияТиповСтроки.КаталогТестов;
	КонецЦикла;
	
	ЮТест.УдалитьПустыеСтрокиКаталогов(ДеревоЗначенийНаФорме.ПолучитьЭлементы());
	
	ЮТест.ПроверитьРавенство(ДеревоЗначенийНаФорме.ПолучитьЭлементы().Количество(), 0, "Не все строки удалены из дерева, хотя ни в одной из них нет ");
	
КонецПроцедуры

//} конец блока юнит-тестов
